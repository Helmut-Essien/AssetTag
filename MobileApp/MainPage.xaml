<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:MobileApp.ViewModels"
             x:Class="MobileApp.MainPage"
             x:DataType="vm:MainPageViewModel"
             BackgroundColor="#F8F9FA">

    <Grid RowDefinitions="Auto,*,Auto">
        
        <!-- Clean Header Section - Material Design 3 -->
        <Grid Grid.Row="0"
              BackgroundColor="#005A9C"
              Padding="20,15,20,20">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            
            <!-- Title -->
            <Label Grid.Row="0" Grid.Column="0"
                   Text="Asset Management"
                   FontFamily="Roboto"
                   FontSize="22"
                   FontAttributes="Bold"
                   TextColor="White"
                   VerticalOptions="Center"/>
            
            <!-- Settings Icon Button -->
            <Border Grid.Row="0" Grid.Column="1"
                    BackgroundColor="Transparent"
                    Stroke="Transparent"
                    Padding="8"
                    VerticalOptions="Center"
                    HorizontalOptions="End">
                <Border.StrokeShape>
                    <RoundRectangle CornerRadius="20"/>
                </Border.StrokeShape>
                <Label Text="⚙️"
                       FontSize="24"
                       HorizontalOptions="Center"
                       VerticalOptions="Center"/>
                <Border.GestureRecognizers>
                    <TapGestureRecognizer Command="{Binding NavigateToSettingsCommand}"/>
                </Border.GestureRecognizers>
            </Border>
        </Grid>

        <!-- Main Content Area with Pull-to-Refresh -->
        <RefreshView Grid.Row="1"
                     IsRefreshing="{Binding IsBusy}"
                     Command="{Binding RefreshCommand}"
                     RefreshColor="#005A9C">
            <ScrollView>
                <VerticalStackLayout Spacing="24" Padding="20,20,20,20">
                    
                    <!-- Summary Cards Section -->
                    <Grid ColumnDefinitions="*,*,*"
                          ColumnSpacing="12">
                        
                        <!-- Total Assets Card -->
                        <Border Grid.Column="0"
                                BackgroundColor="White"
                                Stroke="Transparent"
                                Padding="12,16"
                                Shadow="{Shadow Brush=Black, Opacity=0.06, Radius=8, Offset='0,2'}">
                            <Border.StrokeShape>
                                <RoundRectangle CornerRadius="12"/>
                            </Border.StrokeShape>
                            <VerticalStackLayout Spacing="8" HorizontalOptions="Center">
                                <Label Text="📦"
                                       FontSize="28"
                                       HorizontalOptions="Center"/>
                                <Label Text="{Binding TotalAssets}"
                                       FontFamily="Roboto"
                                       FontSize="24"
                                       FontAttributes="Bold"
                                       HorizontalOptions="Center"
                                       TextColor="#333333"/>
                                <Label Text="Total Assets"
                                       FontFamily="Roboto"
                                       FontSize="11"
                                       HorizontalOptions="Center"
                                       TextColor="#666666"/>
                            </VerticalStackLayout>
                        </Border>
                        
                        <!-- Scanned Today Card -->
                        <Border Grid.Column="1"
                                BackgroundColor="White"
                                Stroke="Transparent"
                                Padding="12,16"
                                Shadow="{Shadow Brush=Black, Opacity=0.06, Radius=8, Offset='0,2'}">
                            <Border.StrokeShape>
                                <RoundRectangle CornerRadius="12"/>
                            </Border.StrokeShape>
                            <VerticalStackLayout Spacing="8" HorizontalOptions="Center">
                                <Label Text="📱"
                                       FontSize="28"
                                       HorizontalOptions="Center"/>
                                <Label Text="{Binding ScannedToday}"
                                       FontFamily="Roboto"
                                       FontSize="24"
                                       FontAttributes="Bold"
                                       HorizontalOptions="Center"
                                       TextColor="#333333"/>
                                <Label Text="Scanned Today"
                                       FontFamily="Roboto"
                                       FontSize="11"
                                       HorizontalOptions="Center"
                                       TextColor="#666666"/>
                            </VerticalStackLayout>
                        </Border>
                        
                        <!-- Pending Sync Card -->
                        <Border Grid.Column="2"
                                BackgroundColor="White"
                                Stroke="Transparent"
                                Padding="12,16"
                                Shadow="{Shadow Brush=Black, Opacity=0.06, Radius=8, Offset='0,2'}">
                            <Border.StrokeShape>
                                <RoundRectangle CornerRadius="12"/>
                            </Border.StrokeShape>
                            <VerticalStackLayout Spacing="8" HorizontalOptions="Center">
                                <Label Text="⚠️"
                                       FontSize="28"
                                       HorizontalOptions="Center"/>
                                <Label Text="{Binding PendingSync}"
                                       FontFamily="Roboto"
                                       FontSize="24"
                                       FontAttributes="Bold"
                                       HorizontalOptions="Center"
                                       TextColor="#FFC107"/>
                                <Label Text="Pending Sync"
                                       FontFamily="Roboto"
                                       FontSize="11"
                                       HorizontalOptions="Center"
                                       TextColor="#666666"/>
                            </VerticalStackLayout>
                        </Border>
                    </Grid>
                    
                    <!-- Sync Status Section -->
                    <Border BackgroundColor="White"
                            Stroke="Transparent"
                            Padding="20,24"
                            Shadow="{Shadow Brush=Black, Opacity=0.06, Radius=8, Offset='0,2'}">
                        <Border.StrokeShape>
                            <RoundRectangle CornerRadius="12"/>
                        </Border.StrokeShape>
                        <VerticalStackLayout Spacing="16" HorizontalOptions="Center">
                            <Label Text="{Binding LastSync, StringFormat='Last Sync: {0}'}"
                                   FontFamily="Roboto"
                                   FontSize="14"
                                   HorizontalOptions="Center"
                                   TextColor="#666666"/>
                            
                            <!-- Sync Data Button -->
                            <Border BackgroundColor="#00796B"
                                    Stroke="Transparent"
                                    Padding="32,14"
                                    HorizontalOptions="Center"
                                    MinimumWidthRequest="200">
                                <Border.StrokeShape>
                                    <RoundRectangle CornerRadius="8"/>
                                </Border.StrokeShape>
                                <Grid ColumnDefinitions="Auto,Auto" ColumnSpacing="8">
                                    <!-- Progress Indicator (visible when syncing) -->
                                    <ActivityIndicator Grid.Column="0"
                                                     IsRunning="{Binding IsBusy}"
                                                     IsVisible="{Binding IsBusy}"
                                                     Color="White"
                                                     WidthRequest="20"
                                                     HeightRequest="20"
                                                     VerticalOptions="Center"/>
                                    <Label Grid.Column="1"
                                           Text="Sync Data"
                                           FontFamily="Roboto"
                                           FontSize="16"
                                           FontAttributes="Bold"
                                           TextColor="White"
                                           VerticalOptions="Center"/>
                                </Grid>
                                <Border.GestureRecognizers>
                                    <TapGestureRecognizer Command="{Binding SyncDataCommand}"/>
                                </Border.GestureRecognizers>
                            </Border>
                        </VerticalStackLayout>
                    </Border>

                    <!-- Quick Actions Section -->
                    <VerticalStackLayout Spacing="16">
                        <Label Text="Quick Actions"
                               FontFamily="Roboto"
                               FontSize="18"
                               FontAttributes="Bold"
                               TextColor="#333333"
                               Margin="0,0,0,4"/>
                        
                        <!-- Add Asset Button -->
                        <Border BackgroundColor="White"
                                Stroke="Transparent"
                                Padding="20,18"
                                Shadow="{Shadow Brush=Black, Opacity=0.06, Radius=8, Offset='0,2'}">
                            <Border.StrokeShape>
                                <RoundRectangle CornerRadius="12"/>
                            </Border.StrokeShape>
                            <Grid ColumnDefinitions="Auto,*,Auto" ColumnSpacing="16">
                                <Border Grid.Column="0"
                                        BackgroundColor="#E8F5E9"
                                        WidthRequest="48"
                                        HeightRequest="48"
                                        Stroke="Transparent">
                                    <Border.StrokeShape>
                                        <RoundRectangle CornerRadius="24"/>
                                    </Border.StrokeShape>
                                    <Label Text="➕"
                                           FontSize="24"
                                           HorizontalOptions="Center"
                                           VerticalOptions="Center"/>
                                </Border>
                                
                                <VerticalStackLayout Grid.Column="1"
                                                   VerticalOptions="Center"
                                                   Spacing="2">
                                    <Label Text="Add New Asset"
                                           FontFamily="Roboto"
                                           FontSize="16"
                                           FontAttributes="Bold"
                                           TextColor="#333333"/>
                                    <Label Text="Register a new item into the inventory"
                                           FontFamily="Roboto"
                                           FontSize="13"
                                           TextColor="#666666"/>
                                </VerticalStackLayout>
                                
                                <Label Grid.Column="2"
                                       Text="›"
                                       FontSize="28"
                                       TextColor="#CCCCCC"
                                       VerticalOptions="Center"/>
                            </Grid>
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding AddAssetCommand}"/>
                            </Border.GestureRecognizers>
                        </Border>
                        
                        <!-- View Assets Button -->
                        <Border BackgroundColor="White"
                                Stroke="Transparent"
                                Padding="20,18"
                                Shadow="{Shadow Brush=Black, Opacity=0.06, Radius=8, Offset='0,2'}">
                            <Border.StrokeShape>
                                <RoundRectangle CornerRadius="12"/>
                            </Border.StrokeShape>
                            <Grid ColumnDefinitions="Auto,*,Auto" ColumnSpacing="16">
                                <Border Grid.Column="0"
                                        BackgroundColor="#E3F2FD"
                                        WidthRequest="48"
                                        HeightRequest="48"
                                        Stroke="Transparent">
                                    <Border.StrokeShape>
                                        <RoundRectangle CornerRadius="24"/>
                                    </Border.StrokeShape>
                                    <Label Text="📋"
                                           FontSize="24"
                                           HorizontalOptions="Center"
                                           VerticalOptions="Center"/>
                                </Border>
                                
                                <VerticalStackLayout Grid.Column="1"
                                                   VerticalOptions="Center"
                                                   Spacing="2">
                                    <Label Text="View Asset List"
                                           FontFamily="Roboto"
                                           FontSize="16"
                                           FontAttributes="Bold"
                                           TextColor="#333333"/>
                                    <Label Text="Browse and filter existing inventory"
                                           FontFamily="Roboto"
                                           FontSize="13"
                                           TextColor="#666666"/>
                                </VerticalStackLayout>
                                
                                <Label Grid.Column="2"
                                       Text="›"
                                       FontSize="28"
                                       TextColor="#CCCCCC"
                                       VerticalOptions="Center"/>
                            </Grid>
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding ViewAssetsCommand}"/>
                            </Border.GestureRecognizers>
                        </Border>
                        
                        <!-- Scan Asset Button -->
                        <Border BackgroundColor="White"
                                Stroke="Transparent"
                                Padding="20,18"
                                Shadow="{Shadow Brush=Black, Opacity=0.06, Radius=8, Offset='0,2'}">
                            <Border.StrokeShape>
                                <RoundRectangle CornerRadius="12"/>
                            </Border.StrokeShape>
                            <Grid ColumnDefinitions="Auto,*,Auto" ColumnSpacing="16">
                                <Border Grid.Column="0"
                                        BackgroundColor="#FFF3E0"
                                        WidthRequest="48"
                                        HeightRequest="48"
                                        Stroke="Transparent">
                                    <Border.StrokeShape>
                                        <RoundRectangle CornerRadius="24"/>
                                    </Border.StrokeShape>
                                    <Label Text="📷"
                                           FontSize="24"
                                           HorizontalOptions="Center"
                                           VerticalOptions="Center"/>
                                </Border>
                                
                                <VerticalStackLayout Grid.Column="1"
                                                   VerticalOptions="Center"
                                                   Spacing="2">
                                    <Label Text="Scan Asset"
                                           FontFamily="Roboto"
                                           FontSize="16"
                                           FontAttributes="Bold"
                                           TextColor="#333333"/>
                                    <Label Text="Quick lookup via barcode or QR"
                                           FontFamily="Roboto"
                                           FontSize="13"
                                           TextColor="#666666"/>
                                </VerticalStackLayout>
                                
                                <Label Grid.Column="2"
                                       Text="›"
                                       FontSize="28"
                                       TextColor="#CCCCCC"
                                       VerticalOptions="Center"/>
                            </Grid>
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding ScanAssetCommand}"/>
                            </Border.GestureRecognizers>
                        </Border>
                    </VerticalStackLayout>
                    
                </VerticalStackLayout>
            </ScrollView>
        </RefreshView>

        <!-- Modern Bottom Navigation Bar -->
        <Border Grid.Row="2"
                BackgroundColor="White"
                Stroke="#E5E7EB"
                StrokeThickness="1">
            <Border.StrokeShape>
                <RoundRectangle CornerRadius="24,24,0,0"/>
            </Border.StrokeShape>
            <Border.Shadow>
                <Shadow Brush="Black"
                        Opacity="0.08"
                        Radius="20"
                        Offset="0,-4"/>
            </Border.Shadow>
            
            <Grid Padding="8,12,8,20"
                  ColumnDefinitions="*,*,*,*"
                  ColumnSpacing="4">
                
                <!-- Home Tab - Active State -->
                <Border Grid.Column="0"
                        BackgroundColor="#E3F2FD"
                        Stroke="Transparent"
                        Padding="8,8">
                    <Border.StrokeShape>
                        <RoundRectangle CornerRadius="12"/>
                    </Border.StrokeShape>
                    <VerticalStackLayout Spacing="4" HorizontalOptions="Center">
                        <Label Text="🏠"
                               FontSize="24"
                               HorizontalOptions="Center"/>
                        <Label Text="Home"
                               FontFamily="Roboto"
                               FontSize="11"
                               FontAttributes="Bold"
                               HorizontalOptions="Center"
                               TextColor="#005A9C"/>
                    </VerticalStackLayout>
                    <Border.GestureRecognizers>
                        <TapGestureRecognizer Command="{Binding RefreshCommand}"/>
                    </Border.GestureRecognizers>
                </Border>
                
                <!-- Inventory Tab -->
                <VerticalStackLayout Grid.Column="1"
                                   Spacing="4"
                                   Padding="8,8"
                                   HorizontalOptions="Center">
                    <Label Text="📦"
                           FontSize="24"
                           HorizontalOptions="Center"
                           Opacity="0.5"/>
                    <Label Text="Inventory"
                           FontFamily="Roboto"
                           FontSize="11"
                           HorizontalOptions="Center"
                           TextColor="#808080"/>
                    <VerticalStackLayout.GestureRecognizers>
                        <TapGestureRecognizer Command="{Binding NavigateToAssetsCommand}"/>
                    </VerticalStackLayout.GestureRecognizers>
                </VerticalStackLayout>
                
                <!-- Categories Tab -->
                <VerticalStackLayout Grid.Column="2"
                                   Spacing="4"
                                   Padding="8,8"
                                   HorizontalOptions="Center">
                    <Label Text="📂"
                           FontSize="24"
                           HorizontalOptions="Center"
                           Opacity="0.5"/>
                    <Label Text="Categories"
                           FontFamily="Roboto"
                           FontSize="11"
                           HorizontalOptions="Center"
                           TextColor="#808080"/>
                    <VerticalStackLayout.GestureRecognizers>
                        <TapGestureRecognizer Command="{Binding NavigateToCategoriesCommand}"/>
                    </VerticalStackLayout.GestureRecognizers>
                </VerticalStackLayout>
                
                <!-- Locations Tab -->
                <VerticalStackLayout Grid.Column="3"
                                   Spacing="4"
                                   Padding="8,8"
                                   HorizontalOptions="Center">
                    <Label Text="📍"
                           FontSize="24"
                           HorizontalOptions="Center"
                           Opacity="0.5"/>
                    <Label Text="Locations"
                           FontFamily="Roboto"
                           FontSize="11"
                           HorizontalOptions="Center"
                           TextColor="#808080"/>
                    <VerticalStackLayout.GestureRecognizers>
                        <TapGestureRecognizer Command="{Binding NavigateToLocationsCommand}"/>
                    </VerticalStackLayout.GestureRecognizers>
                </VerticalStackLayout>
                
            </Grid>
        </Border>
        
    </Grid>

</ContentPage>
